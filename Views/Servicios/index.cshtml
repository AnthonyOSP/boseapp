@model dynamic;
@using System.Collections.Generic;
@{
    ViewData["Title"] = "Servicio";
}

<h1>@ViewData["Title"]</h1>

<div>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addServicioModal">
        Agregar Servicio
    </button>

    <table class="table text-center">
        <thead>
            <tr>
                <th>Id</th>
                <th>Nombre</th>
                <th>Serial Number</th>
                <th>Descripcion</th>
                <th>Fecha De Creacion</th>
                <th>Costo</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var servicio in Model)
            {
                var peruTimeZone = TimeZoneInfo.FindSystemTimeZoneById("SA Pacific Standard Time");
                var fechaDeCreacionPeru = TimeZoneInfo.ConvertTimeFromUtc(servicio.FechaDeCreacion, peruTimeZone);
                <tr>
                    <td>@servicio.Id</td>
                    <td>@servicio.Nombre</td>
                    <td>@servicio.SerialNumber</td>
                    <td>@servicio.Descripcion</td>
                    <td>@servicio.FechaDeCreacion.ToString("dd/MM/yyyy")</td>
                    <td>@servicio.Costo</td>
                    <td>@(servicio.Estado ? "Completado" : "En progreso")</td>
                </tr>
            }
        </tbody>
    </table>
</div>

<div class="modal fade" id="addServicioModal" tabindex="-1" role="dialog" aria-labelledby="addServicioModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addServicioModalLabel">Agregar Servicio</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form asp-action="AddServicio" method="post">
                    <div class="form-group">
                        <label for="SerialNumber">Serial Number</label>
                        <input type="text" class="form-control" id="SerialNumber" name="SerialNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="Descripcion">Descripcion</label>
                        <input type="text" class="form-control" id="Descripcion" name="Descripcion" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Guardar</button>
                </form>
            </div>
        </div>
    </div>
</div>